System.register(["angular2/core","angular2/router","angular2/common","./beacon-validator","../beacon.service","./Beacon.ts"],function(e,t){"use strict";var o=t&&t.id,n=this&&this.__decorate||function(e,t,o,n){var a=arguments.length,r=3>a?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n,i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(3>a?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},a=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},r,i,c,u,s,d,f,l;return{setters:[function(e){r=e},function(e){i=e,s=e},function(e){c=e},function(e){u=e},function(e){d=e},function(e){f=e}],execute:function(){l=function(){function e(e,t,o,n){this._router=t,this._routeParams=o,this._beaconService=n,this.beacon=new f.Beacon,this.form=e.group({id:["",c.Validators.compose([c.Validators.required,u.BeaconValidator.oldBeacon])],beaconName:["",c.Validators.required],storeName:["",c.Validators.required],location:["",c.Validators.required]})}return e.prototype.ngOnInit=function(){var e=this,t=this._routeParams.get("id");this.title=t?"Edit Beacon":"New Beacon",t&&this._beaconService.getBeacon(t).subscribe(function(t){return e.beacon=t},function(t){404==t.status&&e._router.navigate(["NotFound"])})},e.prototype.routerCanDeactivate=function(){return this.form.dirty?confirm("You have unsaved changes. Are you sure you want to navigate away?"):!0},e.prototype.addBeacon=function(){var e=this;console.log(this.form);var t=new f.Beacon;t.id=this.form.find("id").value,t.beaconName=this.form.find("beaconName").value,t.storeName=this.form.find("storeName").value,t.location=this.form.find("location").value,this._beaconService.addBeacon(t).subscribe(function(t){e._router.navigate(["Beacon"])})},e=n([r.Component({selector:"add-beacon",templateUrl:"app/Beacon/AddBeacon/add-beacon.component.html",directives:[i.ROUTER_DIRECTIVES],providers:[d.BeaconService]}),a("design:paramtypes",[c.FormBuilder,s.Router,s.RouteParams,d.BeaconService])],e)}(),e("AddBeaconComponent",l)}}});